name: Build ZanzAMP Profissional
on: [push, workflow_dispatch]

jobs:
  build-windows:
    runs-on: windows-latest
    steps:
      - name: Checkout do CÃ³digo
        uses: actions/checkout@v4

      - name: Baixar JUCE
        run: |
          git clone --depth 1 https://github.com/juce-framework/JUCE.git

      - name: Configurar CMake
        run: |
          cmake -B build -G "Visual Studio 17 2022" -A x64 -DJUCE_ROOT=./JUCE

      - name: Compilar Plugin (Release )
        run: |
          cmake --build build --config Release --parallel

      - name: Upload do Plugin VST3
        uses: actions/upload-artifact@v4
        with:
          name: ZanzAMP-Windows-VST3
          path: build/ZanzAMP_artefacts/Release/VST3/ZanzAMP.vst3

      - name: Upload do Projeto Completo (para Debug)
        if: failure()
        uses: actions/upload-artifact@v4
        with:
          name: logs-erro
          path: build/
